name: Run Auto Daily Script

on:
  workflow_dispatch:
  schedule:
    - cron: '*/5 9 * * 1-5' # Every 5 minutes, between 09:00 AM and 09:59 AM UTC, Monday through Friday

jobs:
  run-bash:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v3

    - name: Install jq
      run: sudo apt-get install -y jq

    - name: Run Auto Daily script
      env:
        CLIENT_EMAIL: ${{ secrets.CLIENT_EMAIL }}
        PRIVATE_KEY: ${{ secrets.PRIVATE_KEY }}
        GEMINI_API_KEY: ${{ secrets.GEMINI_API_KEY }}
        SHEET_ID: ${{ secrets.SHEET_ID }}
        WEEKLY_WEBHOOK_URL: ${{ secrets.WEEKLY_WEBHOOK_URL }}
        DAILY_WEBHOOK_URL: ${{ secrets.DAILY_WEBHOOK_URL }}
        RANGE: ${{ secrets.RANGE }}
      run: |
        chmod +x ./autodaily.sh
        ./autodaily.sh
